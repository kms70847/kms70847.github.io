<html>
    <body>

        Enter text here:
        <br/>
        <textarea rows="10" cols="100" id="userinput"></textarea>

        <br/>
        Then copy the markup here:
        <br/>
        <textarea rows="10" cols="100" id="spoileroutput"/></textarea>

        <script type="text/javascript">
            function urlsafe_encode(s){
                return btoa(s).replace(/\+/g, "-").replace(/\//g, "_")
            }    

            function encode_utf8(s){
                return unescape(encodeURIComponent(s));
            }

            function spoilerize(x){
                return "[view spoiler](http://sopython.com/spoiler/" + encodeURIComponent(urlsafe_encode(encode_utf8(x))) + ")"
            }

            window.setInterval(function(){
                var userinput = document.querySelector("#userinput").value;
                document.querySelector("#spoileroutput").value = spoilerize(userinput);
            }, 500);
        </script>

    </body>
</html>